# 🚀 互動式吉他彈唱點播平台 - 未來開發藍圖

> **更新日期**: 2026-01-19  
> **當前版本**: v4.0.0

---

## 📋 功能完成度統計

```
核心功能      ████████████████████ 100%
管理員功能    ████████████████████ 100%
訪客互動      ████████████████████ 100%
效能優化      ██████████████████░░ 90%
PWA 支援      ████████████████░░░░ 80%
測試覆蓋      ████████████░░░░░░░░ 60%
```

---

## 🎯 短期優先開發項目（1-2 週）

### ⭐⭐⭐ 高優先級

| 項目 | 說明 | 預估工時 | 難度 |
|------|------|:--------:|:----:|
| **即時推播通知 (FCM)** | 歌曲進入 Top 3 時推播給訂閱者 | 8 小時 | 🟡 |
| **標籤篩選功能** | 歌曲列表支援多標籤篩選 | 3 小時 | 🟢 |
| **測試覆蓋率 → 70%** | 新增核心 Hook 與元件測試 | 6 小時 | 🟢 |
| **Bundle Size 優化** | 目標 < 600KB (目前 ~1MB) | 3 小時 | 🟡 |

### 📝 詳細說明

#### 1. 即時推播通知 (FCM)
```
功能需求：
├─ 訂閱者可收到通知：
│   ├─ 您點的歌進入 Top 3
│   ├─ 您點的歌正在彈奏
│   └─ 新歌曲上架（可選）
├─ 推播設定頁面
└─ 支援 iOS Safari + Android Chrome

技術方案：
├─ Firebase Cloud Messaging (FCM)
├─ Service Worker 整合
└─ Notification API
```

#### 2. 標籤篩選功能
```
UI 設計：
[歌曲列表]
  ┌─ 篩選：[🔘全部] [華語] [西洋] [日韓] [動漫]
  │       [經典] [流行] [抒情] [搖滾] ...
  └─ 可多選，顯示符合任一標籤的歌曲
```

---

## 🔮 中期功能擴展（1 個月內）

### ⭐⭐ 中優先級

| 項目 | 說明 | 預估工時 | ROI |
|------|------|:--------:|:---:|
| **現場表演模式** | 大螢幕投影專用介面 | 8 小時 | ⭐⭐⭐ |
| **統計儀表板 v1** | 基礎數據視覺化 | 10 小時 | ⭐⭐⭐ |
| **多國語系 (i18n)** | 繁中/簡中/英文 | 6 小時 | ⭐⭐ |
| **歌詞同步播放** | LRC 格式支援 | 12 小時 | ⭐⭐ |

### 📝 詳細說明

#### 1. 現場表演模式 🎤
```
專為投影設計的顯示介面：

┌─────────────────────────────────────────┐
│  🎸 吉他點歌 LIVE           🔴 LIVE    │
├─────────────────────────────────────────┤
│                                         │
│     🎵 Now Playing                      │
│                                         │
│     《 告白氣球 》                       │
│       周杰倫                            │
│                                         │
│     ♪ ♫ ♪ ♫ ♪                          │
│                                         │
├─────────────────────────────────────────┤
│  下一首：小幸運 - 田馥甄                 │
│  等候中：8 首                           │
└─────────────────────────────────────────┘

功能：
├─ 全螢幕顯示
├─ 自動輪播 Top 10 排行
├─ 訪客互動動畫放大顯示
└─ 鍵盤快捷鍵控制 (←/→/Space)
```

#### 2. 統計儀表板 v1 📊
```
儀表板頁面 (管理員專用)：

┌─────────────────────────────────────────┐
│ 📊 統計總覽                 [本週 ▼]    │
├─────────────────────────────────────────┤
│ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐ │
│ │ 🗳️    │ │ 📈    │ │ 🎵    │ │ 👤    │ │
│ │ 1,234 │ │ +15%  │ │  85   │ │  42   │ │
│ │總投票數│ │ 週成長 │ │曲庫數量│ │今日訪客│ │
│ └───────┘ └───────┘ └───────┘ └───────┘ │
├─────────────────────────────────────────┤
│ 🔥 本週熱門 TOP 10                       │
│  1. 告白氣球     ▓▓▓▓▓▓▓▓▓▓ 89         │
│  2. 小幸運       ▓▓▓▓▓▓▓▓░░ 72         │
│  3. 慢慢喜歡你   ▓▓▓▓▓▓▓░░░ 65         │
│  ...                                    │
├─────────────────────────────────────────┤
│ 📅 每日投票趨勢                          │
│  ╭───────────────────────────╮          │
│  │    ●   ●                  │          │
│  │ ●     ●  ●    ●          │          │
│  │           ●  ● ●         │          │
│  ╰───────────────────────────╯          │
│   週一 週二 週三 週四 週五 週六 週日      │
└─────────────────────────────────────────┘

技術方案：
├─ Recharts 圖表庫
├─ Firestore 統計資料快照
└─ 每日定時聚合 (Cloud Functions)
```

#### 3. 多國語系支援 🌐
```
支援語言：
├─ 繁體中文 (預設)
├─ 簡體中文
└─ English

技術方案：
├─ react-i18next
├─ 語言包 JSON 檔案
└─ localStorage 記住偏好

切換 UI：
[🌐 繁] ← 點擊切換
```

---

## 🌟 長期進階功能（2-3 個月）

### ⭐ 願景項目

| 項目 | 說明 | 預估工時 | 複雜度 |
|------|------|:--------:|:------:|
| **社群登入系統** | Google/Facebook/Apple 登入 | 16 小時 | 🟡 |
| **用戶收藏夾** | 個人喜愛歌曲清單 | 5 小時 | 🟢 |
| **積分勳章系統** | 點播累積積分與獎勵 | 15 小時 | 🔴 |
| **AI 歌曲推薦** | 根據歷史行為推薦 | 20 小時 | 🔴 |
| **打賞金流整合** | 綠界/藍新金流 | 25 小時 | 🔴 |

### 📝 詳細說明

#### 1. 社群登入系統 👤
```
登入選項：
┌─────────────────────────────────────┐
│         登入以解鎖更多功能          │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ 🔴 使用 Google 帳號登入        │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 🔵 使用 Facebook 帳號登入      │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ ⚫ 使用 Apple 帳號登入         │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 登入後可享：                        │
│ ✓ 雲端同步點播歷史                  │
│ ✓ 建立個人收藏夾                    │
│ ✓ 累積積分與勳章                    │
└─────────────────────────────────────┘

技術方案：Firebase Authentication
```

#### 2. 積分勳章系統 🏆
```
積分規則：
├─ 每次點播：+10 分
├─ 連續 7 天登入：+50 分
├─ 被演出的歌曲：+20 分
└─ 打賞表演者：+打賞金額 x 2 分

勳章成就：
🥉 新手聽眾   - 首次點播
🥈 熱門選手   - 累計點播 50 首
🥇 音樂達人   - 累計點播 200 首
💎 傳奇聽眾   - 累計點播 1000 首
🌟 人氣推手   - 點播歌曲進入 Top 3 共 10 次
```

---

## 🔧 技術優化項目

### 效能面

| 項目 | 目前狀態 | 目標值 | 優化方案 |
|------|:--------:|:------:|----------|
| Bundle Size | ~1 MB | < 600 KB | 分割策略、Tree-shaking |
| 測試覆蓋率 | 60% | 80% | 補足核心模組測試 |
| FCP | ~1.5s | < 1.0s | 預載入、骨架屏優化 |
| LCP | ~2.5s | < 2.0s | 圖片懶加載、CDN |

### 程式碼品質

| 項目 | 優先級 | 說明 |
|------|:------:|------|
| TypeScript Strict Mode | 🟡 | 消除 any 類型 |
| ESLint + Prettier | 🟢 | 統一程式碼風格 |
| Husky Pre-commit | 🟢 | 提交前自動檢查 |
| E2E 測試 (Playwright) | 🟡 | 關鍵流程自動化測試 |

### 安全性

| 項目 | 目前狀態 | 建議 |
|------|:--------:|------|
| Rate Limiting | 前端防連點 | 後端 API 限流 (Cloud Functions) |
| Content Security Policy | 未設定 | 加入 CSP header |
| Firestore Rules 審核 | 進行中 | 持續強化規則 |

---

## 📅 推薦開發時程

```
2026年 1月
├─ 第四週：標籤篩選功能、Bundle 優化
└─ 評估：即時推播通知技術方案

2026年 2月
├─ 第一週：即時推播通知 (FCM)
├─ 第二週：現場表演模式
├─ 第三週：統計儀表板 v1
└─ 第四週：多國語系支援

2026年 3月
├─ 第一週：社群登入系統
├─ 第二週：用戶收藏夾
├─ 第三週：積分勳章系統 (Phase 1)
└─ 第四週：測試與優化

2026年 Q2
├─ 歌詞同步播放功能
├─ AI 歌曲推薦
└─ 商業化功能評估
```

---

## 🎯 快速行動清單

### 本週可立即開始

- [ ] **標籤篩選 UI** (3 小時) - 提升歌曲搜尋體驗
- [ ] **Bundle 分析與優化** (2 小時) - 使用 rollup-plugin-visualizer
- [ ] **測試覆蓋補齊** (4 小時) - 針對 useVoting、useSongSearch

### 下週計畫

- [ ] **FCM 推播基礎設定** - Firebase Console 設定
- [ ] **Service Worker 整合** - 推播接收處理
- [ ] **現場表演模式 UI 設計** - Figma 原型

### 月底里程碑

- [ ] ✨ 即時推播通知上線
- [ ] ✨ 現場表演模式完成
- [ ] ✨ 測試覆蓋率達 70%

---

## 💡 開發小建議

### 開始新功能前

1. **先確認需求** - 與用戶確認功能細節
2. **技術評估** - 選擇最適合的技術方案
3. **寫測試** - TDD 可避免後期債務
4. **漸進式發布** - 使用 Feature Flag 控制

### 維護程式碼品質

1. **定期更新依賴** - `npm outdated` 檢查
2. **TypeScript 嚴格模式** - 漸進啟用
3. **Performance 監控** - Firebase Performance
4. **錯誤追蹤** - 考慮 Sentry 整合

---

## 📞 相關資源

| 資源 | 說明 |
|------|------|
| [Firebase FCM 文件](https://firebase.google.com/docs/cloud-messaging) | 推播通知 |
| [react-i18next 文件](https://react.i18next.com/) | 多國語系 |
| [Recharts 文件](https://recharts.org/) | 圖表庫 |
| [Playwright 文件](https://playwright.dev/) | E2E 測試 |

---

*最後更新：2026-01-19 14:15*
